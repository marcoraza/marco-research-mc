<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ğŸ”¬ Research Mission Control â€” Marco OS</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
<style>
/* â”€â”€ RESET + VARS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
:root{
  --bg:#111;--bg2:#1a1a1a;--bg3:#222;
  --sep:rgba(255,255,255,.06);--sep2:rgba(255,255,255,.1);
  --text:#e2e2e2;--dim:#888;--dim2:#555;
  --green:#4ade80;--blue:#60a5fa;--yellow:#fbbf24;
  --orange:#fb923c;--purple:#c084fc;--red:#f87171;--gold:#fcd34d;
  --overlay:rgba(0,0,0,.55)
}
html,body{height:100%;background:var(--bg);color:var(--text);font-family:-apple-system,BlinkMacSystemFont,'Inter','Segoe UI',sans-serif;font-size:13px}

/* â”€â”€ LAYOUT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.page{max-width:1200px;margin:0 auto;padding:32px 24px 64px}

/* â”€â”€ HEADER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.header{display:flex;align-items:flex-start;justify-content:space-between;margin-bottom:24px}
.header h1{font-size:22px;font-weight:600;letter-spacing:-.4px}
.header-sub{font-size:12px;color:var(--dim);margin-top:3px;display:flex;align-items:center;gap:12px}
.header-sub a{color:var(--dim);text-decoration:none;display:flex;align-items:center;gap:4px;transition:color .15s}
.header-sub a:hover{color:var(--text)}
.header-sub .sep{color:var(--dim2)}
.header-right{display:flex;align-items:center;gap:14px;padding-top:4px}
.status-pill{display:flex;align-items:center;gap:6px;font-size:12px;color:var(--green)}
.sdot{width:6px;height:6px;border-radius:50%;background:var(--green);animation:blink 2.4s ease-in-out infinite}
@keyframes blink{0%,100%{opacity:1}50%{opacity:.3}}
.clock{font-size:12px;color:var(--dim);font-variant-numeric:tabular-nums}

/* â”€â”€ TOP TABS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.top-tabs{display:flex;gap:8px;margin-bottom:18px}
.top-tab{padding:7px 14px;border:1px solid var(--sep2);border-radius:7px;background:var(--bg2);color:var(--dim);font-size:12px;font-weight:600;cursor:pointer;transition:all .15s}
.top-tab:hover{color:var(--text);border-color:rgba(255,255,255,.2)}
.top-tab.on{background:rgba(96,165,250,.12);border-color:rgba(96,165,250,.35);color:var(--blue)}

/* â”€â”€ SECTIONS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.section{display:none}
.section.on{display:block}

/* â”€â”€ STATS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.stats{display:flex;gap:36px;padding:0 0 24px;border-bottom:1px solid var(--sep);margin-bottom:24px;flex-wrap:wrap}
.stat{display:flex;flex-direction:column}
.stat-val{font-size:22px;font-weight:700;line-height:1}
.stat-lbl{font-size:11px;color:var(--dim);margin-top:3px}

/* â”€â”€ ACTIONS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.actions{display:flex;align-items:center;gap:8px;margin-bottom:20px;flex-wrap:wrap}
.actions-r{margin-left:auto;display:flex;align-items:center;gap:6px;flex-wrap:wrap}
.btn{display:inline-flex;align-items:center;gap:6px;padding:6px 12px;border-radius:5px;font-size:12px;font-weight:500;cursor:pointer;transition:all .15s;border:1px solid var(--sep2);background:var(--bg2);color:var(--dim)}
.btn:hover{color:var(--text);border-color:rgba(255,255,255,.2)}
.btn.primary{background:rgba(74,222,128,.1);border-color:rgba(74,222,128,.25);color:var(--green)}
.btn.primary:hover{background:rgba(74,222,128,.18)}
.btn.active{background:rgba(255,255,255,.08);border-color:rgba(255,255,255,.18);color:var(--text)}
.search{display:flex;align-items:center;gap:6px;background:var(--bg2);border:1px solid var(--sep2);border-radius:5px;padding:5px 10px}
.search input{background:none;border:none;outline:none;color:var(--text);font-size:12px;width:140px}
.search input::placeholder{color:var(--dim2)}
.filter-select{background:var(--bg2);border:1px solid var(--sep2);border-radius:5px;padding:6px 10px;font-size:12px;color:var(--text);outline:none;cursor:pointer}
.filter-select option{background:var(--bg3)}
.phase-filter{display:flex;align-items:center;gap:6px;flex-wrap:wrap}
.phase-chip{border:1px solid var(--sep2);background:var(--bg2);color:var(--dim);font-size:11px;padding:6px 10px;border-radius:14px;cursor:pointer;transition:all .15s}
.phase-chip:hover{color:var(--text);border-color:rgba(255,255,255,.2)}
.phase-chip.on{background:rgba(251,191,36,.14);border-color:rgba(251,191,36,.35);color:var(--yellow)}

/* â”€â”€ VIEW TOGGLE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.view-toggle{display:flex;gap:2px;background:var(--bg2);border:1px solid var(--sep2);border-radius:5px;padding:2px}
.vt-btn{padding:4px 10px;border-radius:3px;cursor:pointer;font-size:11px;color:var(--dim);transition:all .15s;user-select:none;display:flex;align-items:center;gap:5px}
.vt-btn:hover{color:var(--text)}
.vt-btn.on{background:var(--bg3);color:var(--text)}

/* â”€â”€ VIEWS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.view{display:none}
.view.on{display:block}

/* â”€â”€ KANBAN â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.kanban{display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:12px}
@media(max-width:900px){.kanban{overflow-x:auto;display:flex;min-width:100%}}
.kb-col{background:var(--bg2);border:1px solid var(--sep);border-radius:8px;overflow:hidden;min-width:160px}
.kb-col-head{padding:10px 14px;border-bottom:1px solid var(--sep);display:flex;align-items:center;justify-content:space-between}
.kb-col-title{font-size:11px;font-weight:600;text-transform:uppercase;letter-spacing:.07em;display:flex;align-items:center;gap:7px}
.kb-col-cnt{font-size:10px;color:var(--dim2);background:var(--bg3);padding:1px 7px;border-radius:10px}
.kb-cards{padding:8px;display:flex;flex-direction:column;gap:6px;max-height:calc(100vh - 400px);overflow-y:auto}
.kb-card{background:var(--bg3);border:1px solid var(--sep2);border-radius:6px;padding:9px 11px;transition:border-color .15s;cursor:pointer}
.kb-card:hover{border-color:rgba(255,255,255,.18)}
.kb-card-platform{font-size:16px;margin-bottom:4px}
.kb-card-title{font-size:12px;font-weight:500;line-height:1.3;margin-bottom:6px;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}
.kb-card-creator{font-size:10px;color:var(--dim);margin-bottom:6px;padding:2px 6px;background:rgba(255,255,255,.05);border-radius:3px;display:inline-block}
.kb-card-foot{display:flex;align-items:center;justify-content:space-between;gap:6px;flex-wrap:wrap}
.kb-card-rating{font-size:11px}
.kb-card-valor{font-size:9px;font-weight:600;padding:2px 6px;border-radius:10px;text-transform:uppercase;letter-spacing:.05em}
.kb-card-valor.ref{background:rgba(136,136,136,.15);color:var(--dim)}
.kb-card-valor.apl{background:rgba(96,165,250,.15);color:var(--blue)}
.kb-card-valor.alt{background:rgba(251,146,60,.15);color:var(--orange)}
.kb-card-valor.gam{background:rgba(248,113,113,.15);color:var(--red)}
.kb-card-date{font-size:10px;color:var(--dim2);margin-top:4px}
.kb-card-tags{display:flex;gap:3px;flex-wrap:wrap;margin-top:4px}
.kb-card-tag{font-size:9px;background:rgba(255,255,255,.05);color:var(--dim);padding:1px 5px;border-radius:8px}

/* â”€â”€ ROADMAP â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.roadmap-meta{display:flex;align-items:center;gap:8px;color:var(--dim2);font-size:11px}
.roadmap-progress{display:flex;flex-direction:column;gap:10px;background:var(--bg2);border:1px solid var(--sep);border-radius:8px;padding:10px 12px;margin-bottom:12px}
.roadmap-progress-top{display:flex;align-items:center;gap:8px}
.roadmap-progress-lbl{font-size:10px;text-transform:uppercase;letter-spacing:.08em;color:var(--dim2)}
.roadmap-progress-val{font-size:12px;font-weight:600}
.roadmap-progress-track{width:100%;height:6px;border-radius:999px;background:var(--bg3);overflow:hidden}
.roadmap-progress-fill{height:100%;border-radius:999px;background:linear-gradient(90deg,var(--blue),var(--green));transition:width .2s}
.roadmap-phase-progress{display:grid;grid-template-columns:repeat(auto-fit,minmax(110px,1fr));gap:8px}
.roadmap-phase-pill{display:flex;flex-direction:column;gap:4px}
.roadmap-phase-head{display:flex;align-items:center;justify-content:space-between;font-size:10px;color:var(--dim)}
.roadmap-phase-bar{height:4px;border-radius:999px;background:var(--bg3);overflow:hidden}
.roadmap-phase-fill{height:100%;border-radius:999px;background:rgba(74,222,128,.85)}
.roadmap-card{display:flex;flex-direction:column;gap:8px}
.roadmap-card-top{display:flex;align-items:center;justify-content:space-between;gap:8px}
.roadmap-prefix{font-size:11px;color:var(--yellow);font-weight:700;letter-spacing:.02em}
.roadmap-card-title{font-size:12px;font-weight:600;line-height:1.25}
.roadmap-card-sub{display:flex;align-items:center;gap:6px;flex-wrap:wrap}
.roadmap-badge{display:inline-flex;align-items:center;font-size:10px;font-weight:600;padding:2px 7px;border-radius:999px;border:1px solid var(--sep2);color:var(--dim)}
.roadmap-badge.phase{color:var(--yellow);background:rgba(251,191,36,.12);border-color:rgba(251,191,36,.28)}
.roadmap-badge.area{color:var(--blue);background:rgba(96,165,250,.12);border-color:rgba(96,165,250,.28)}
.roadmap-badge.eta{color:var(--dim);background:rgba(255,255,255,.04)}
.roadmap-turn{margin-left:auto;font-size:10px;color:var(--dim2)}
.roadmap-empty{padding:22px 12px;color:var(--dim);font-size:12px;text-align:center}

/* â”€â”€ ROADMAP DRAWER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.drawer-backdrop{position:fixed;inset:0;background:var(--overlay);opacity:0;pointer-events:none;transition:opacity .16s;z-index:30}
.drawer-backdrop.on{opacity:1;pointer-events:auto}
.roadmap-drawer{position:fixed;top:0;right:0;height:100%;width:min(420px,92vw);background:#101010;border-left:1px solid var(--sep2);transform:translateX(100%);transition:transform .18s;z-index:31;display:flex;flex-direction:column}
.roadmap-drawer.on{transform:translateX(0)}
.drawer-head{display:flex;align-items:flex-start;justify-content:space-between;padding:16px 16px 12px;border-bottom:1px solid var(--sep)}
.drawer-title{font-size:15px;font-weight:700;line-height:1.3;padding-right:12px}
.drawer-close{background:none;border:none;color:var(--dim);cursor:pointer;font-size:18px;line-height:1;padding:2px 6px}
.drawer-close:hover{color:var(--text)}
.drawer-body{padding:14px 16px 18px;overflow-y:auto;display:flex;flex-direction:column;gap:14px}
.drawer-row{display:flex;align-items:center;gap:8px;flex-wrap:wrap}
.turn-chip{display:inline-flex;align-items:center;gap:6px;padding:3px 9px;border-radius:999px;font-size:10px;font-weight:700;text-transform:uppercase;letter-spacing:.06em}
.turn-chip.you{background:rgba(74,222,128,.14);color:var(--green)}
.turn-chip.frank{background:rgba(96,165,250,.14);color:var(--blue)}
.turn-chip.other{background:rgba(255,255,255,.08);color:var(--dim)}
.mini-steps{display:flex;flex-direction:column;gap:6px}
.mini-step{display:flex;align-items:flex-start;gap:8px;font-size:11px;color:var(--text)}
.mini-step input{margin-top:2px;accent-color:var(--green);width:11px;height:11px}
.mini-dot{color:var(--dim2);font-size:12px;line-height:1.2}
.drawer-section-title{font-size:10px;text-transform:uppercase;letter-spacing:.08em;color:var(--dim2)}
.drawer-links{display:flex;flex-wrap:wrap;gap:6px}
.drawer-link{display:inline-flex;align-items:center;gap:4px;font-size:10px;text-decoration:none;color:var(--blue);border:1px solid rgba(96,165,250,.25);background:rgba(96,165,250,.08);padding:4px 8px;border-radius:4px}
.drawer-link:hover{background:rgba(96,165,250,.14)}

/* â”€â”€ LIST VIEW â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.list-table{width:100%;border-collapse:collapse}
.list-table thead{border-bottom:1px solid var(--sep)}
.list-table th{font-size:10px;font-weight:600;text-transform:uppercase;letter-spacing:.06em;color:var(--dim2);padding:8px 6px;text-align:left;cursor:pointer;user-select:none}
.list-table th:hover{color:var(--dim)}
.list-table th svg{display:inline-block;margin-left:3px;opacity:.3;vertical-align:middle}
.list-table td{padding:10px 6px;border-bottom:1px solid var(--sep);font-size:12px}
.list-table tr{cursor:pointer;transition:background .1s}
.list-table tr:hover{background:rgba(255,255,255,.025)}
.list-table .platform-emoji{font-size:16px}
.list-table .creator-badge{font-size:10px;background:rgba(255,255,255,.05);padding:2px 6px;border-radius:3px;color:var(--dim)}
.list-table .tags-cell{display:flex;gap:3px;flex-wrap:wrap}
.list-table .tag-pill{font-size:9px;background:rgba(255,255,255,.05);padding:1px 5px;border-radius:8px;color:var(--dim)}

/* â”€â”€ STATS VIEW â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.charts-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:16px;margin-bottom:28px}
.chart-box{background:var(--bg2);border-radius:7px;padding:16px;border:1px solid var(--sep)}
.chart-box h4{font-size:11px;font-weight:600;text-transform:uppercase;letter-spacing:.08em;color:var(--dim);margin-bottom:12px}
.chart-canvas{max-height:240px}

/* â”€â”€ BADGES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.badge{display:inline-flex;align-items:center;gap:3px;font-size:10px;font-weight:500;padding:2px 8px;border-radius:20px}
.badge.ok{background:rgba(74,222,128,.1);color:var(--green)}
.badge.err{background:rgba(248,113,113,.1);color:var(--red)}
.badge.idle{background:rgba(255,255,255,.05);color:var(--dim2)}
.badge.gray{background:rgba(136,136,136,.15);color:var(--dim)}
.badge.blue{background:rgba(96,165,250,.15);color:var(--blue)}
.badge.orange{background:rgba(251,146,60,.15);color:var(--orange)}
.badge.yellow{background:rgba(251,191,36,.15);color:var(--yellow)}
.badge.green{background:rgba(74,222,128,.15);color:var(--green)}
.badge.purple{background:rgba(192,132,252,.15);color:var(--purple)}

/* â”€â”€ SCROLLBAR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
::-webkit-scrollbar{width:6px;height:6px}
::-webkit-scrollbar-track{background:var(--bg)}
::-webkit-scrollbar-thumb{background:var(--bg3);border-radius:3px}
::-webkit-scrollbar-thumb:hover{background:var(--dim2)}
</style>
</head>
<body>
<div class="page">

<!-- â”€â”€ HEADER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<div class="header">
  <div>
    <h1>ğŸ”¬ Research Mission Control</h1>
    <div class="header-sub">
      Deep Dives Pipeline
      <span class="sep">Â·</span>
      <a href="https://www.notion.so/310b72d5042d81228590ca967b0ee686" target="_blank">
        <svg width="11" height="11" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><polyline points="15,3 21,3 21,9"/><line x1="10" y1="14" x2="21" y2="3"/></svg>
        Notion DB
      </a>
      <span class="sep">Â·</span>
      <span id="update-time" style="color:var(--dim2)">â€”</span>
    </div>
  </div>
  <div class="header-right">
    <div class="status-pill"><div class="sdot"></div>ONLINE</div>
    <div class="clock" id="clock">--:-- BRT</div>
  </div>
</div>

<div class="top-tabs">
  <button class="top-tab on" id="tab-deep-dives" onclick="setTopTab('deep-dives')">Deep Dives</button>
  <button class="top-tab" id="tab-build-roadmap" onclick="setTopTab('build-roadmap')">Build Roadmap</button>
</div>

<section class="section on" id="section-deep-dives">
<!-- â”€â”€ STATS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<div class="stats">
  <div class="stat"><div class="stat-val" style="color:var(--green)" id="s-total">â€”</div><div class="stat-lbl">Total</div></div>
  <div class="stat"><div class="stat-val" id="s-pendente">â€”</div><div class="stat-lbl">Pendente</div></div>
  <div class="stat"><div class="stat-val" style="color:var(--blue)" id="s-analisado">â€”</div><div class="stat-lbl">Analisado</div></div>
  <div class="stat"><div class="stat-val" style="color:var(--orange)" id="s-fila">â€”</div><div class="stat-lbl">Na Fila</div></div>
  <div class="stat"><div class="stat-val" style="color:var(--yellow)" id="s-execucao">â€”</div><div class="stat-lbl">Em ExecuÃ§Ã£o</div></div>
  <div class="stat"><div class="stat-val" style="color:var(--green)" id="s-executado">â€”</div><div class="stat-lbl">Executado</div></div>
  <div class="stat"><div class="stat-val" style="color:var(--purple)" id="s-capitalizado">â€”</div><div class="stat-lbl">Capitalizado</div></div>
</div>

<!-- â”€â”€ ACTIONS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<div class="actions">
  <button class="btn primary" onclick="loadData()">â†» Refresh</button>
  <select class="filter-select" id="filter-platform" onchange="applyFilters()">
    <option value="">Todas Plataformas</option>
    <option value="X/Twitter">ğŸ¦ X/Twitter</option>
    <option value="YouTube">ğŸ¬ YouTube</option>
    <option value="Instagram">ğŸ“¸ Instagram</option>
    <option value="TikTok">ğŸµ TikTok</option>
    <option value="Podcast">ğŸ™ï¸ Podcast</option>
    <option value="Artigo">ğŸ“„ Artigo</option>
  </select>
  <select class="filter-select" id="filter-rating" onchange="applyFilters()">
    <option value="">Todas Ratings</option>
    <option value="â­">â­</option>
    <option value="â­â­">â­â­</option>
    <option value="â­â­â­">â­â­â­</option>
    <option value="â­â­â­â­">â­â­â­â­</option>
    <option value="â­â­â­â­â­">â­â­â­â­â­</option>
  </select>
  <div class="actions-r">
    <div class="search">
      <svg width="11" height="11" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
      <input type="text" id="search-input" placeholder="Buscar..." oninput="applyFilters()">
    </div>
    <div class="view-toggle">
      <div class="vt-btn on" id="vt-kanban" onclick="setView('kanban')" title="Kanban">
        <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="5" height="18" rx="1"/><rect x="10" y="3" width="5" height="11" rx="1"/><rect x="17" y="3" width="5" height="15" rx="1"/></svg>
        Kanban
      </div>
      <div class="vt-btn" id="vt-list" onclick="setView('list')" title="Lista">
        <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="8" y1="6" x2="21" y2="6"/><line x1="8" y1="12" x2="21" y2="12"/><line x1="8" y1="18" x2="21" y2="18"/><line x1="3" y1="6" x2="3.01" y2="6"/><line x1="3" y1="12" x2="3.01" y2="12"/><line x1="3" y1="18" x2="3.01" y2="18"/></svg>
        Lista
      </div>
      <div class="vt-btn" id="vt-stats" onclick="setView('stats')" title="Stats">
        <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="12" width="4" height="9"/><rect x="10" y="7" width="4" height="14"/><rect x="17" y="3" width="4" height="18"/></svg>
        Stats
      </div>
    </div>
  </div>
</div>

<!-- â”€â”€ KANBAN VIEW â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<div class="view on" id="view-kanban">
  <div class="kanban" id="kanban-root"></div>
</div>

<!-- â”€â”€ LIST VIEW â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<div class="view" id="view-list">
  <table class="list-table" id="list-table">
    <thead>
      <tr>
        <th onclick="sortTable('status')">Status <svg width="8" height="8" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6,9 12,15 18,9"/></svg></th>
        <th onclick="sortTable('platform')">Platform <svg width="8" height="8" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6,9 12,15 18,9"/></svg></th>
        <th onclick="sortTable('title')">Title <svg width="8" height="8" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6,9 12,15 18,9"/></svg></th>
        <th onclick="sortTable('creator')">Creator <svg width="8" height="8" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6,9 12,15 18,9"/></svg></th>
        <th onclick="sortTable('rating')">Rating <svg width="8" height="8" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6,9 12,15 18,9"/></svg></th>
        <th onclick="sortTable('valor')">Valor <svg width="8" height="8" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6,9 12,15 18,9"/></svg></th>
        <th onclick="sortTable('date')">Date <svg width="8" height="8" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6,9 12,15 18,9"/></svg></th>
        <th>Tags</th>
      </tr>
    </thead>
    <tbody id="list-body"></tbody>
  </table>
</div>

<!-- â”€â”€ STATS VIEW â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<div class="view" id="view-stats">
  <div class="charts-grid">
    <div class="chart-box">
      <h4>Items por Status</h4>
      <canvas id="chart-status" class="chart-canvas"></canvas>
    </div>
    <div class="chart-box">
      <h4>Items por Plataforma</h4>
      <canvas id="chart-platform" class="chart-canvas"></canvas>
    </div>
    <div class="chart-box">
      <h4>Items por Rating</h4>
      <canvas id="chart-rating" class="chart-canvas"></canvas>
    </div>
    <div class="chart-box">
      <h4>Top Criadores</h4>
      <canvas id="chart-creators" class="chart-canvas"></canvas>
    </div>
  </div>
</div>
</section>

<section class="section" id="section-build-roadmap">
  <div class="actions">
    <button class="btn primary" onclick="loadRoadmapData()">â†» Refresh</button>
    <div class="phase-filter" id="roadmap-phase-filter"></div>
    <div class="actions-r">
      <select class="filter-select" id="filter-roadmap-area" onchange="applyRoadmapFilters()">
        <option value="">Todas Ãreas</option>
      </select>
      <div class="roadmap-meta">
        <span id="roadmap-total">â€” tasks</span>
        <span class="sep">Â·</span>
        <span id="roadmap-update-time">â€”</span>
      </div>
    </div>
  </div>
  <div class="roadmap-progress">
    <div class="roadmap-progress-top">
      <span class="roadmap-progress-lbl">Overall</span>
      <span class="roadmap-progress-val" id="roadmap-overall-progress">0%</span>
    </div>
    <div class="roadmap-progress-track"><div class="roadmap-progress-fill" id="roadmap-overall-fill" style="width:0%"></div></div>
    <div class="roadmap-phase-progress" id="roadmap-phase-progress"></div>
  </div>
  <div class="kanban" id="roadmap-kanban-root"></div>
</section>

</div><!-- /.page -->
<div class="drawer-backdrop" id="drawer-backdrop" onclick="closeRoadmapDrawer()"></div>
<aside class="roadmap-drawer" id="roadmap-drawer" aria-hidden="true">
  <div class="drawer-head">
    <div class="drawer-title" id="drawer-title">â€”</div>
    <button class="drawer-close" type="button" onclick="closeRoadmapDrawer()" aria-label="Close">Ã—</button>
  </div>
  <div class="drawer-body">
    <div class="drawer-row" id="drawer-badges"></div>
    <div>
      <div class="drawer-section-title">Turn</div>
      <div style="margin-top:6px" id="drawer-turn"></div>
    </div>
    <div>
      <div class="drawer-section-title">Microsteps</div>
      <div class="mini-steps" id="drawer-steps" style="margin-top:8px"></div>
    </div>
    <div id="drawer-links-wrap" style="display:none">
      <div class="drawer-section-title">Links</div>
      <div class="drawer-links" id="drawer-links" style="margin-top:8px"></div>
    </div>
  </div>
</aside>

<script>
// â”€â”€ DATA â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
let DATA = { items: [], total: 0, updated: '' };
let FILTERED_ITEMS = [];
let CURRENT_SORT = { column: '', direction: 'asc' };
let CURRENT_TOP_TAB = 'deep-dives';
let ROADMAP_DATA = { items: [], updated: '' };
let FILTERED_ROADMAP_ITEMS = [];
let ROADMAP_PHASE_FILTERS = new Set();
let ACTIVE_ROADMAP_ITEM = null;

// â”€â”€ UTILS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function pad(n) { return String(n).padStart(2,'0'); }
function getBRT() { return new Date(new Date().toLocaleString('en-US',{timeZone:'America/Sao_Paulo'})); }

// â”€â”€ CLOCK â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function updateClock() {
  const d = getBRT();
  document.getElementById('clock').textContent = pad(d.getHours())+':'+pad(d.getMinutes())+' BRT';
}
setInterval(updateClock, 10000); updateClock();

// â”€â”€ PLATFORM EMOJIS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const PLATFORM_EMOJI = {
  'X/Twitter': 'ğŸ¦',
  'YouTube': 'ğŸ¬',
  'Instagram': 'ğŸ“¸',
  'TikTok': 'ğŸµ',
  'Podcast': 'ğŸ™ï¸',
  'Artigo': 'ğŸ“„'
};

// â”€â”€ STATUS COLORS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const STATUS_COLORS = {
  'Pendente': { bg: 'var(--bg3)', text: 'var(--dim)' },
  'Analisado': { bg: 'rgba(96,165,250,.15)', text: 'var(--blue)' },
  'Na Fila': { bg: 'rgba(251,146,60,.15)', text: 'var(--orange)' },
  'Em ExecuÃ§Ã£o': { bg: 'rgba(251,191,36,.15)', text: 'var(--yellow)' },
  'Executado': { bg: 'rgba(74,222,128,.15)', text: 'var(--green)' },
  'Capitalizado': { bg: 'rgba(192,132,252,.15)', text: 'var(--purple)' },
  'Descartado': { bg: 'rgba(85,85,85,.15)', text: 'var(--dim2)' }
};

const STATUS_ORDER = ['Pendente', 'Analisado', 'Na Fila', 'Em ExecuÃ§Ã£o', 'Executado', 'Capitalizado', 'Descartado'];

const ROADMAP_STATUS_ORDER = ['Backlog', 'Em andamento', 'Bloqueado', 'Done'];
const ROADMAP_STATUS_COLORS = {
  'Backlog': { text: 'var(--dim)', bg: 'var(--bg3)' },
  'Em andamento': { text: 'var(--blue)', bg: 'rgba(96,165,250,.15)' },
  'Bloqueado': { text: 'var(--red)', bg: 'rgba(248,113,113,.15)' },
  'Done': { text: 'var(--green)', bg: 'rgba(74,222,128,.15)' }
};
const ROADMAP_STATUS_LABELS = {
  'Backlog': 'Todo',
  'Em andamento': 'Doing',
  'Bloqueado': 'Block',
  'Done': 'Done'
};

// â”€â”€ LOAD DATA â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const EMBEDDED_DATA = {
  "updated": "2026-02-23T22:04:23.466899",
  "total": 5,
  "items": [
    {
      "id": "310b72d5-042d-811e-9919-d2bf2801979c",
      "url": "https://www.notion.so/5-OpenClaw-use-cases-that-will-make-you-a-productivity-MACHINE-310b72d5042d811e9919d2bf2801979c",
      "title": "5 OpenClaw use cases that will make you a productivity MACHINE",
      "platform": "YouTube",
      "rating": "â­â­â­",
      "status": "Analisado",
      "valor": "AplicÃ¡vel",
      "tags": [],
      "date": "2026-02-23",
      "original_url": "https://www.youtube.com/watch?v=XeTgMEapbag",
      "creator": "Alex Finn",
      "creator_id": "310b72d5-042d-81e7-8177-c4057b74ac04",
      "created": "2026-02-23"
    },
    {
      "id": "310b72d5-042d-8121-9fb1-c9496f55da00",
      "url": "https://www.notion.so/How-I-Run-My-Entire-Business-With-AI-Agents-Full-OpenClaw-Setup-Sharbel-310b72d5042d81219fb1c9496f55da00",
      "title": "How I Run My Entire Business With AI Agents (Full OpenClaw Setup) â€” Sharbel",
      "platform": "X/Twitter",
      "rating": "â­â­â­â­",
      "status": "Analisado",
      "valor": "Alta Prioridade",
      "tags": [
        "AI Agents",
        "Automation",
        "Business Model"
      ],
      "date": "2026-02-23",
      "original_url": "https://x.com/sharbel/status/2025944354070659094",
      "creator": "Sharbel",
      "creator_id": "310b72d5-042d-819b-b942-c52a2a9f72a5",
      "created": "2026-02-23"
    },
    {
      "id": "310b72d5-042d-8138-b015-e673edd95b77",
      "url": "https://www.notion.so/Build-a-Profitable-App-in-Any-Niche-in-Under-a-Day-Om-Patel-310b72d5042d8138b015e673edd95b77",
      "title": "Build a Profitable App in Any Niche in Under a Day â€” Om Patel",
      "platform": "X/Twitter",
      "rating": "â­â­â­",
      "status": "Analisado",
      "valor": "AplicÃ¡vel",
      "tags": [
        "AI Agents",
        "Product"
      ],
      "date": "2026-02-23",
      "original_url": "https://x.com/om_patel5/status/2025443882331164926",
      "creator": "Om Patel",
      "creator_id": "310b72d5-042d-8165-a10c-e4978b0e4dff",
      "created": "2026-02-23"
    },
    {
      "id": "310b72d5-042d-817a-97e0-dd5dc931cc13",
      "url": "https://www.notion.so/Qual-cheiro-faz-sua-cabe-a-doer-Comente-MUSA-que-te-envio-o-cupom-de-desconto-do-leo-essencia-310b72d5042d817a97e0dd5dc931cc13",
      "title": "Qual cheiro faz sua cabeÃ§a doer?ğŸ¤¯\n\nComente \"MUSA\" que te envio o cupom de desconto do Ã³leo essencial",
      "platform": "Instagram",
      "rating": "â­â­",
      "status": "Analisado",
      "valor": "ReferÃªncia",
      "tags": [],
      "date": "2026-02-23",
      "original_url": "https://www.instagram.com/reel/DVG84lPDL_D/?utm_source=ig_web_copy_link&igsh=NTc4MTIwNjQ2YQ==",
      "creator": "drpauloabner.enxaqueca",
      "creator_id": "310b72d5-042d-81bb-9e3b-c534b966775c",
      "created": "2026-02-23"
    },
    {
      "id": "310b72d5-042d-819d-ac19-c4ec81743bb5",
      "url": "https://www.notion.so/Nem-tudo-luta-s-vezes-Deus-dizendo-descansa-reflex-o-deus-310b72d5042d819dac19c4ec81743bb5",
      "title": "Nem tudo Ã© luta. Ã€s vezes Ã© Deus dizendo: descansa.. #reflexÃ£o #deus ...",
      "platform": "TikTok",
      "rating": "",
      "status": "Pendente",
      "valor": "",
      "tags": [],
      "date": "2026-02-23",
      "original_url": "https://www.tiktok.com/@motivacristoofc/video/7601368255021796628",
      "creator": "motivacristoofc",
      "creator_id": "310b72d5-042d-81b2-8a62-ed9e3b570f94",
      "created": "2026-02-23"
    }
  ]
};

const ROADMAP_EMBEDDED_DATA = {
  "updated": "2026-02-23T22:00:00Z",
  "items": []
};

async function loadData() {
  try {
    try {
      const resp = await fetch('research_mc_data.json');
      if (resp.ok) DATA = await resp.json();
      else DATA = EMBEDDED_DATA;
    } catch(e) {
      DATA = EMBEDDED_DATA;
    }
    FILTERED_ITEMS = DATA.items;
    updateStats();
    updateTimestamp();
    applyFilters();
  } catch(e) {
    console.error('Failed to load data:', e);
    document.getElementById('s-total').textContent = 'ERR';
  }
}

function updateStats() {
  document.getElementById('s-total').textContent = DATA.total;
  document.getElementById('s-pendente').textContent = DATA.items.filter(i => i.status === 'Pendente').length;
  document.getElementById('s-analisado').textContent = DATA.items.filter(i => i.status === 'Analisado').length;
  document.getElementById('s-fila').textContent = DATA.items.filter(i => i.status === 'Na Fila').length;
  document.getElementById('s-execucao').textContent = DATA.items.filter(i => i.status === 'Em ExecuÃ§Ã£o').length;
  document.getElementById('s-executado').textContent = DATA.items.filter(i => i.status === 'Executado').length;
  document.getElementById('s-capitalizado').textContent = DATA.items.filter(i => i.status === 'Capitalizado').length;
}

function updateTimestamp() {
  if (DATA.updated) {
    const d = new Date(DATA.updated);
    document.getElementById('update-time').textContent = 'Updated ' + d.toLocaleString('pt-BR', {
      month: 'short', day: 'numeric', hour: '2-digit', minute: '2-digit'
    });
  }
}

async function loadRoadmapData() {
  try {
    try {
      const resp = await fetch('roadmap_data.json');
      if (resp.ok) ROADMAP_DATA = await resp.json();
      else ROADMAP_DATA = ROADMAP_EMBEDDED_DATA;
    } catch(e) {
      ROADMAP_DATA = ROADMAP_EMBEDDED_DATA;
    }
    initRoadmapFilters();
    applyRoadmapFilters();
    updateRoadmapMeta();
  } catch(e) {
    console.error('Failed to load roadmap data:', e);
    document.getElementById('roadmap-total').textContent = 'ERR';
  }
}

function updateRoadmapMeta() {
  document.getElementById('roadmap-total').textContent = `${FILTERED_ROADMAP_ITEMS.length}/${ROADMAP_DATA.items.length} cards`;
  if (ROADMAP_DATA.updated) {
    const d = new Date(ROADMAP_DATA.updated);
    document.getElementById('roadmap-update-time').textContent = 'Updated ' + d.toLocaleString('pt-BR', {
      month: 'short', day: 'numeric', hour: '2-digit', minute: '2-digit'
    });
  }
}

function setTopTab(tab) {
  CURRENT_TOP_TAB = tab;
  document.querySelectorAll('.top-tab').forEach(btn => btn.classList.remove('on'));
  document.querySelectorAll('.section').forEach(section => section.classList.remove('on'));
  document.getElementById('tab-' + tab).classList.add('on');
  document.getElementById('section-' + tab).classList.add('on');

  if (tab === 'build-roadmap') renderRoadmapKanban();
  else renderCurrentView();
}

// â”€â”€ FILTERS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function applyFilters() {
  const searchQ = document.getElementById('search-input').value.toLowerCase();
  const platformF = document.getElementById('filter-platform').value;
  const ratingF = document.getElementById('filter-rating').value;

  FILTERED_ITEMS = DATA.items.filter(item => {
    if (searchQ && !item.title.toLowerCase().includes(searchQ)) return false;
    if (platformF && item.platform !== platformF) return false;
    if (ratingF && item.rating !== ratingF) return false;
    return true;
  });

  renderCurrentView();
}

// â”€â”€ VIEW TOGGLE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function setView(v) {
  document.querySelectorAll('.vt-btn').forEach(b => b.classList.remove('on'));
  document.querySelectorAll('.view').forEach(vw => vw.classList.remove('on'));
  document.getElementById('vt-' + v).classList.add('on');
  document.getElementById('view-' + v).classList.add('on');
  renderCurrentView();
}

function renderCurrentView() {
  const active = document.querySelector('.view.on').id;
  if (active === 'view-kanban') renderKanban();
  else if (active === 'view-list') renderList();
  else if (active === 'view-stats') renderStats();
}

function initRoadmapFilters() {
  const phaseRoot = document.getElementById('roadmap-phase-filter');
  phaseRoot.innerHTML = '';
  for (let phase = 0; phase <= 5; phase++) {
    const btn = document.createElement('button');
    btn.className = ROADMAP_PHASE_FILTERS.has(phase) ? 'phase-chip on' : 'phase-chip';
    btn.type = 'button';
    btn.textContent = `${phase}.x`;
    btn.onclick = () => toggleRoadmapPhase(phase);
    phaseRoot.appendChild(btn);
  }

  const areaSelect = document.getElementById('filter-roadmap-area');
  const currentArea = areaSelect.value;
  const areas = [...new Set(ROADMAP_DATA.items.map(i => i.area).filter(Boolean))].sort((a, b) => a.localeCompare(b));
  areaSelect.innerHTML = '<option value="">Todas Ãreas</option>' + areas.map(area => `<option value="${area}">${area}</option>`).join('');
  areaSelect.value = areas.includes(currentArea) ? currentArea : '';
}

function toggleRoadmapPhase(phase) {
  if (ROADMAP_PHASE_FILTERS.has(phase)) ROADMAP_PHASE_FILTERS.delete(phase);
  else ROADMAP_PHASE_FILTERS.add(phase);
  initRoadmapFilters();
  applyRoadmapFilters();
}

function applyRoadmapFilters() {
  const selectedArea = document.getElementById('filter-roadmap-area').value;
  FILTERED_ROADMAP_ITEMS = ROADMAP_DATA.items.filter(item => {
    const phaseOk = ROADMAP_PHASE_FILTERS.size === 0 || ROADMAP_PHASE_FILTERS.has(item.phase);
    const areaOk = !selectedArea || item.area === selectedArea;
    return phaseOk && areaOk;
  });

  updateRoadmapMeta();
  renderRoadmapProgress();
  renderRoadmapKanban();
}

function renderRoadmapKanban() {
  const root = document.getElementById('roadmap-kanban-root');
  if (!root) return;
  root.innerHTML = '';

  ROADMAP_STATUS_ORDER.forEach(status => {
    const col = document.createElement('div');
    col.className = 'kb-col';
    const color = ROADMAP_STATUS_COLORS[status];
    const items = FILTERED_ROADMAP_ITEMS
      .filter(i => i.status === status)
      .sort((a, b) => a.phase - b.phase || String(a.id).localeCompare(String(b.id)));

    col.innerHTML = `
      <div class="kb-col-head">
        <div class="kb-col-title" style="color:${color.text}">${ROADMAP_STATUS_LABELS[status] || status}</div>
        <span class="kb-col-cnt">${items.length}</span>
      </div>
      <div class="kb-cards"></div>
    `;

    const cardsRoot = col.querySelector('.kb-cards');
    if (items.length === 0) {
      cardsRoot.innerHTML = '<div class="roadmap-empty">Sem itens nesse estÃ¡gio</div>';
    } else {
      items.forEach(item => {
        const card = document.createElement('div');
        card.className = 'kb-card roadmap-card';
        card.onclick = () => openRoadmapDrawer(item.id);
        const title = getRoadmapShortTitle(item);
        const owner = getOwnerLabel(item.owner);
        const phaseBadge = `${Number(item.phase)}.x`;

        card.innerHTML = `
          <div class="roadmap-card-top">
            <span class="roadmap-prefix">${getRoadmapPrefix(item)}</span>
            <span class="roadmap-turn">${owner.short}</span>
          </div>
          <div class="roadmap-card-title">${title}</div>
          <div class="roadmap-card-sub">
            <span class="roadmap-badge phase">${phaseBadge}</span>
            <span class="roadmap-badge area">${item.area || 'Core'}</span>
            <span class="roadmap-badge eta">${item.eta || 'TBD'}</span>
          </div>
        `;
        cardsRoot.appendChild(card);
      });
    }

    root.appendChild(col);
  });
}

function getRoadmapPrefix(item) {
  if (!item || typeof item !== 'object') return '0.x';
  const rawId = String(item.id || '');
  const match = rawId.match(/p(\d+)-(\d+)/i);
  if (!match) return `${Number(item.phase || 0)}.x`;
  return `${Number(match[1])}.${Number(match[2])}`;
}

function getRoadmapShortTitle(item) {
  if (!item || !item.title) return 'Untitled';
  if (item.short_title) return item.short_title;
  const cleaned = String(item.title).replace(/[()]/g, '').replace(/\s+/g, ' ').trim();
  if (cleaned.length <= 34) return cleaned;
  const words = cleaned.split(' ').slice(0, 5);
  return words.join(' ') + '...';
}

function getOwnerLabel(owner) {
  const value = String(owner || '').toLowerCase();
  if (value === 'you' || value === 'marco') return { label: 'Your turn', short: 'You', cls: 'you' };
  if (value === 'frank') return { label: 'Frank turn', short: 'Frank', cls: 'frank' };
  return { label: owner ? `${owner} turn` : 'Unassigned', short: owner || 'â€”', cls: 'other' };
}

function renderRoadmapProgress() {
  const total = ROADMAP_DATA.items.length;
  const done = ROADMAP_DATA.items.filter(i => i.status === 'Done').length;
  const pct = total ? Math.round((done / total) * 100) : 0;

  document.getElementById('roadmap-overall-progress').textContent = `${pct}%`;
  document.getElementById('roadmap-overall-fill').style.width = `${pct}%`;

  const phaseRoot = document.getElementById('roadmap-phase-progress');
  phaseRoot.innerHTML = '';
  for (let phase = 0; phase <= 5; phase++) {
    const phaseItems = ROADMAP_DATA.items.filter(i => Number(i.phase) === phase);
    const phaseDone = phaseItems.filter(i => i.status === 'Done').length;
    const phasePct = phaseItems.length ? Math.round((phaseDone / phaseItems.length) * 100) : 0;
    const phaseEl = document.createElement('div');
    phaseEl.className = 'roadmap-phase-pill';
    phaseEl.innerHTML = `
      <div class="roadmap-phase-head">
        <span>${phase}.x</span>
        <span>${phasePct}%</span>
      </div>
      <div class="roadmap-phase-bar"><div class="roadmap-phase-fill" style="width:${phasePct}%"></div></div>
    `;
    phaseRoot.appendChild(phaseEl);
  }
}

function openRoadmapDrawer(itemId) {
  const item = ROADMAP_DATA.items.find(i => i.id === itemId);
  if (!item) return;
  ACTIVE_ROADMAP_ITEM = item;

  document.getElementById('drawer-title').textContent = `${getRoadmapPrefix(item)} ${item.title}`;
  document.getElementById('drawer-badges').innerHTML = `
    <span class="roadmap-badge phase">${Number(item.phase)}.x</span>
    <span class="roadmap-badge area">${item.area || 'Core'}</span>
    <span class="roadmap-badge eta">${item.status || 'Backlog'}</span>
    <span class="roadmap-badge eta">${item.eta || 'TBD'}</span>
  `;

  const owner = getOwnerLabel(item.owner);
  document.getElementById('drawer-turn').innerHTML = `<span class="turn-chip ${owner.cls}">${owner.label}</span>`;

  const stepsRoot = document.getElementById('drawer-steps');
  const steps = Array.isArray(item.steps) ? item.steps : [];
  stepsRoot.innerHTML = '';
  if (steps.length === 0) {
    stepsRoot.innerHTML = '<div class="mini-step"><span class="mini-dot">â€¢</span><span>No microsteps yet</span></div>';
  } else {
    steps.forEach(step => {
      const row = document.createElement('label');
      row.className = 'mini-step';
      row.innerHTML = `<input type="checkbox" disabled><span class="mini-dot">â€¢</span><span>${step}</span>`;
      stepsRoot.appendChild(row);
    });
  }

  const linksWrap = document.getElementById('drawer-links-wrap');
  const linksRoot = document.getElementById('drawer-links');
  linksRoot.innerHTML = '';
  const links = getRoadmapLinks(item);
  if (links.length > 0) {
    linksWrap.style.display = 'block';
    links.forEach(link => {
      const a = document.createElement('a');
      a.className = 'drawer-link';
      a.href = link.url;
      a.target = '_blank';
      a.rel = 'noopener noreferrer';
      a.textContent = link.label;
      linksRoot.appendChild(a);
    });
  } else {
    linksWrap.style.display = 'none';
  }

  document.getElementById('drawer-backdrop').classList.add('on');
  document.getElementById('roadmap-drawer').classList.add('on');
  document.getElementById('roadmap-drawer').setAttribute('aria-hidden', 'false');
}

function getRoadmapLinks(item) {
  const out = [];
  if (Array.isArray(item.links)) {
    item.links.forEach(link => {
      if (link && link.url) out.push({ label: link.label || link.type || 'Link', url: link.url });
    });
  }
  if (item.notion_url) out.push({ label: 'Notion', url: item.notion_url });
  return out;
}

function closeRoadmapDrawer() {
  ACTIVE_ROADMAP_ITEM = null;
  document.getElementById('drawer-backdrop').classList.remove('on');
  document.getElementById('roadmap-drawer').classList.remove('on');
  document.getElementById('roadmap-drawer').setAttribute('aria-hidden', 'true');
}

document.addEventListener('keydown', e => {
  if (e.key === 'Escape') closeRoadmapDrawer();
});

// â”€â”€ KANBAN â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderKanban() {
  const root = document.getElementById('kanban-root');
  root.innerHTML = '';

  STATUS_ORDER.forEach(status => {
    const items = FILTERED_ITEMS.filter(i => i.status === status);
    const col = document.createElement('div');
    col.className = 'kb-col';

    const color = STATUS_COLORS[status];
    col.innerHTML = `
      <div class="kb-col-head">
        <div class="kb-col-title" style="color:${color.text}">${status}</div>
        <span class="kb-col-cnt">${items.length}</span>
      </div>
      <div class="kb-cards" id="kb-${status.replace(/\s/g,'')}"></div>
    `;

    const cards = col.querySelector('.kb-cards');
    items.forEach(item => {
      const card = document.createElement('div');
      card.className = 'kb-card';
      card.onclick = () => window.open(item.url, '_blank');

      const emoji = PLATFORM_EMOJI[item.platform] || 'ğŸ“Œ';
      const valorClass = item.valor === 'ReferÃªncia' ? 'ref' : item.valor === 'AplicÃ¡vel' ? 'apl' : item.valor === 'Alta Prioridade' ? 'alt' : 'gam';
      const title = item.title.length > 60 ? item.title.slice(0, 60) + '...' : item.title;

      card.innerHTML = `
        <div class="kb-card-platform">${emoji}</div>
        <div class="kb-card-title">${title}</div>
        ${item.creator ? `<div class="kb-card-creator">${item.creator}</div>` : ''}
        <div class="kb-card-foot">
          <div class="kb-card-rating">${item.rating || 'â€”'}</div>
          ${item.valor ? `<div class="kb-card-valor ${valorClass}">${item.valor}</div>` : ''}
        </div>
        ${item.date ? `<div class="kb-card-date">${item.date}</div>` : ''}
        ${item.tags.length > 0 ? `<div class="kb-card-tags">${item.tags.slice(0, 3).map(t => `<span class="kb-card-tag">${t}</span>`).join('')}</div>` : ''}
      `;
      cards.appendChild(card);
    });

    root.appendChild(col);
  });
}

// â”€â”€ LIST â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderList() {
  const tbody = document.getElementById('list-body');
  tbody.innerHTML = '';

  let items = [...FILTERED_ITEMS];
  if (CURRENT_SORT.column) {
    items.sort((a, b) => {
      const aVal = a[CURRENT_SORT.column] || '';
      const bVal = b[CURRENT_SORT.column] || '';
      const cmp = aVal < bVal ? -1 : aVal > bVal ? 1 : 0;
      return CURRENT_SORT.direction === 'asc' ? cmp : -cmp;
    });
  }

  items.forEach(item => {
    const tr = document.createElement('tr');
    tr.onclick = () => window.open(item.url, '_blank');

    const emoji = PLATFORM_EMOJI[item.platform] || 'ğŸ“Œ';
    const statusColor = STATUS_COLORS[item.status];
    const valorClass = item.valor === 'ReferÃªncia' ? 'gray' : item.valor === 'AplicÃ¡vel' ? 'blue' : item.valor === 'Alta Prioridade' ? 'orange' : 'err';

    tr.innerHTML = `
      <td><span class="badge ${valorClass}" style="background:${statusColor.bg};color:${statusColor.text}">${item.status}</span></td>
      <td><span class="platform-emoji">${emoji}</span> ${item.platform}</td>
      <td>${item.title}</td>
      <td>${item.creator ? `<span class="creator-badge">${item.creator}</span>` : 'â€”'}</td>
      <td>${item.rating || 'â€”'}</td>
      <td>${item.valor ? `<span class="badge ${valorClass}">${item.valor}</span>` : 'â€”'}</td>
      <td>${item.date || 'â€”'}</td>
      <td><div class="tags-cell">${item.tags.slice(0, 3).map(t => `<span class="tag-pill">${t}</span>`).join('')}</div></td>
    `;
    tbody.appendChild(tr);
  });
}

function sortTable(col) {
  if (CURRENT_SORT.column === col) {
    CURRENT_SORT.direction = CURRENT_SORT.direction === 'asc' ? 'desc' : 'asc';
  } else {
    CURRENT_SORT.column = col;
    CURRENT_SORT.direction = 'asc';
  }
  renderList();
}

// â”€â”€ STATS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
let charts = {};

function renderStats() {
  renderStatusChart();
  renderPlatformChart();
  renderRatingChart();
  renderCreatorsChart();
}

function renderStatusChart() {
  const ctx = document.getElementById('chart-status');
  if (charts.status) charts.status.destroy();

  const statusCounts = {};
  STATUS_ORDER.forEach(s => statusCounts[s] = FILTERED_ITEMS.filter(i => i.status === s).length);

  charts.status = new Chart(ctx, {
    type: 'bar',
    data: {
      labels: STATUS_ORDER,
      datasets: [{
        label: 'Items',
        data: STATUS_ORDER.map(s => statusCounts[s]),
        backgroundColor: STATUS_ORDER.map(s => STATUS_COLORS[s].bg),
        borderColor: STATUS_ORDER.map(s => STATUS_COLORS[s].text),
        borderWidth: 1
      }]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      plugins: { legend: { display: false } },
      scales: {
        y: { beginAtZero: true, ticks: { color: '#888' }, grid: { color: 'rgba(255,255,255,.05)' } },
        x: { ticks: { color: '#888' }, grid: { display: false } }
      }
    }
  });
}

function renderPlatformChart() {
  const ctx = document.getElementById('chart-platform');
  if (charts.platform) charts.platform.destroy();

  const platforms = {};
  FILTERED_ITEMS.forEach(i => platforms[i.platform] = (platforms[i.platform] || 0) + 1);

  charts.platform = new Chart(ctx, {
    type: 'doughnut',
    data: {
      labels: Object.keys(platforms),
      datasets: [{
        data: Object.values(platforms),
        backgroundColor: ['#60a5fa', '#4ade80', '#fbbf24', '#fb923c', '#c084fc', '#f87171']
      }]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      plugins: { legend: { position: 'bottom', labels: { color: '#888', font: { size: 10 } } } }
    }
  });
}

function renderRatingChart() {
  const ctx = document.getElementById('chart-rating');
  if (charts.rating) charts.rating.destroy();

  const ratings = {};
  ['â­', 'â­â­', 'â­â­â­', 'â­â­â­â­', 'â­â­â­â­â­'].forEach(r => ratings[r] = FILTERED_ITEMS.filter(i => i.rating === r).length);

  charts.rating = new Chart(ctx, {
    type: 'bar',
    data: {
      labels: Object.keys(ratings),
      datasets: [{
        label: 'Items',
        data: Object.values(ratings),
        backgroundColor: '#fcd34d',
        borderColor: '#fbbf24',
        borderWidth: 1
      }]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      plugins: { legend: { display: false } },
      scales: {
        y: { beginAtZero: true, ticks: { color: '#888' }, grid: { color: 'rgba(255,255,255,.05)' } },
        x: { ticks: { color: '#888' }, grid: { display: false } }
      }
    }
  });
}

function renderCreatorsChart() {
  const ctx = document.getElementById('chart-creators');
  if (charts.creators) charts.creators.destroy();

  const creators = {};
  FILTERED_ITEMS.forEach(i => {
    if (i.creator) creators[i.creator] = (creators[i.creator] || 0) + 1;
  });

  const sorted = Object.entries(creators).sort((a, b) => b[1] - a[1]).slice(0, 10);

  charts.creators = new Chart(ctx, {
    type: 'bar',
    data: {
      labels: sorted.map(c => c[0].length > 20 ? c[0].slice(0, 20) + '...' : c[0]),
      datasets: [{
        label: 'Items',
        data: sorted.map(c => c[1]),
        backgroundColor: '#c084fc',
        borderColor: '#a855f7',
        borderWidth: 1
      }]
    },
    options: {
      indexAxis: 'y',
      responsive: true,
      maintainAspectRatio: false,
      plugins: { legend: { display: false } },
      scales: {
        x: { beginAtZero: true, ticks: { color: '#888' }, grid: { color: 'rgba(255,255,255,.05)' } },
        y: { ticks: { color: '#888', font: { size: 10 } }, grid: { display: false } }
      }
    }
  });
}

// â”€â”€ INIT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
async function init() {
  await Promise.all([loadData(), loadRoadmapData()]);
}
init();
</script>
</body>
</html>
